{% extends 'base.html' %}

{% block content %}

<h2>Agregar nuevo producto</h2>
    <div>
        <a href="{{ url_for('main.dashboard_general') }}" class="btn btn-primary">Volver</a>
    </div>
    
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="alert alert-{{ category }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
{% endwith %}

<div class="container-fluid py-4">
    <div class="form-container">
        <h2 class="form-title text-center">Registro de Producto</h2>
        
       
        <form method="POST">
            <div class="row">
                <!-- Información básica del producto -->
                <div class="col-md-4">
                    <div class="section-title">Información Básica</div>
                    <div class="mb-3">
                        <label class="form-label">Nombre</label>
                        <input type="text" name="nombre" class="form-control" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Descripción</label>
                        <textarea name="descripcion" class="form-control" rows="3"></textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Código de Barras</label>
                        <input type="text" name="codigo_barras" class="form-control">
                    </div>
                </div>
                
                <!-- Información de precios y stock -->
                <div class="col-md-4">
                    <div class="section-title">Precios y Stock</div>
                    <div class="mb-3">
                        <label class="form-label">Precio Costo</label>
                        <div class="input-group">
                            <span class="input-group-text">$</span>
                            <input type="number" step="0.01" name="precio_costo" class="form-control" required>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Precio Venta</label>
                        <div class="input-group">
                            <span class="input-group-text">$</span>
                            <input type="number" step="0.01" name="precio_venta" class="form-control" required>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Impuestos (%)</label>
                        <div class="input-group">
                            <input type="number" step="0.01" name="impuestos" class="form-control">
                            <span class="input-group-text">%</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Stock Actual</label>
                        <input type="number" name="stock_actual" class="form-control">
                    </div>
                </div>
                
                <!-- Clasificación y ubicación -->
                <div class="col-md-4">
                    <div class="section-title">Clasificación y Ubicación</div>
                    <div class="mb-3">
                        <label class="form-label">Categoría</label>
                        <select name="categoria_id" class="form-select">
                            <option value="">Seleccione una categoría</option>
                            {% for cat in categorias %}
                                <option value="{{ cat.id }}">{{ cat.nombre}}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Proveedor</label>
                        <select name="proveedor_id" class="form-select">
                            <option value="">Seleccione un proveedor</option>
                            {% for prov in proveedores %}
                                <option value="{{ prov.id }}">{{ prov.nombre }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Talle</label>
                        <select name="talle_id" class="form-select">
                            <option value="">Seleccione un talle</option>
                            {% for t in talles %}
                                <option value="{{ t.id }}">{{ t.nombre }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Sucursal</label>
                        <select name="sucursal_id" class="form-select">
                            <option value="">Seleccione una sucursal</option>
                            {% for suc in sucursales %}
                                <option value="{{ suc.id }}">{{ suc.nombre }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="row mt-4">
                <div class="col-12 text-center">
                    <button type="submit" class="btn btn-primary px-5">Guardar Producto</button>
                    <button type="reset" class="btn btn-outline-secondary ms-2">Limpiar</button>
                </div>
            </div>
        </form>
    </div>
</div>

{% endblock %}